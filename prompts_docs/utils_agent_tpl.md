# 工具层：Agent 通用模板 (tpl.yaml)

本文档概述定义在 `rdagent/utils/agent/tpl.yaml` 文件中的内容。通常，`.yaml` 文件用于存储配置或数据。鉴于其位于 `agent` 工具目录下且名为 `tpl.yaml` (template的缩写)，它很可能包含供Agent行为使用的通用文本模板或结构化片段，这些模板可能最终被格式化并用作LLM提示词的一部分，或者用于生成特定格式的输出。

## 文件内容概览 (通用预期)

-   **源文件路径**: `rdagent/utils/agent/tpl.yaml`

-   **主要用途**:
    -   **可复用文本片段**: 存储一些在多个不同Agent或提示词中都可能用到的标准文本块，例如通用的指令、角色设定、格式要求说明、免责声明等。
    -   **结构化数据模板**: (可能) 定义一些通用的数据结构模板（例如，JSON Schema片段、Markdown表格模板），Agent在生成输出时可以填充这些模板。
    -   **Jinja2宏或包含片段**: 如果与 `rdagent/utils/agent/tpl.py` 结合使用，此 `tpl.yaml` 文件可能被 `tpl.py` 中的逻辑加载，并作为Jinja2模板环境的一部分，允许其他提示词通过 `{% include %}` 或宏调用的方式复用这里的片段。
    -   **行为配置**: (不太可能，但存在可能) 存储一些控制Agent通用行为的简单配置参数，但更复杂的配置通常在 `conf.py` 中。

-   **内容示例 (推测)**:
    -   一个通用的JSON输出格式要求说明。
    -   标准的错误信息模板。
    -   Agent向用户请求澄清时的标准问句格式。
    -   用于格式化历史记录或上下文信息的通用Jinja2宏定义。

-   **在流程中的位置**:
    -   `rdagent/utils/agent/tpl.py` 中的代码逻辑可能会在初始化时加载此 `tpl.yaml` 文件。
    -   当不同的Agent组件需要生成提示词或格式化输出时，可能会从 `tpl.py` 提供的接口中间接使用到此文件中定义的模板或片段。

-   **设计说明**:
    -   使用YAML文件存储模板可以使得这些文本片段与Python代码分离，便于管理和修改，而无需改动代码逻辑。
    -   通过 `tpl.py` 的封装，可以为这些模板提供更便捷的编程接口（例如，带参数的模板渲染）。

**与 `rdagent/utils/agent/tpl.py` 的关系**:

`tpl.yaml` 和 `tpl.py` 通常是紧密配合工作的：
-   `tpl.yaml`: 存储原始的模板字符串或结构化数据。
-   `tpl.py`: 负责加载 `tpl.yaml`，并可能提供一个类或函数，使得其他代码可以通过调用方法或属性来获取渲染后的模板内容。例如，`tpl.py` 中可能有一个 `TemplateManager` 类，其实例持有了从 `tpl.yaml` 加载的所有模板。

**注意**: 此文档提供的是对该路径下文件用途的通用预期。具体模板内容和使用方式需查阅源文件 `rdagent/utils/agent/tpl.yaml` 以及 `rdagent/utils/agent/tpl.py` 的实现。
